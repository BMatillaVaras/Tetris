"use strict";const grid=document.querySelector(".grid");let squares=Array.from(document.querySelectorAll(".grid div"));const scoreDisplay=document.querySelector("#score"),startBtn=document.querySelector("#start- button"),width=10,lTetromino=[[1,11,21,2],[10,11,12,22],[1,11,21,20],[10,20,21,22]],uTetromino=[[0,1,11,21],[2,10,11,12],[1,11,21,22],[10,11,12,20]],zTetromino=[[11,12,20,21],[0,10,11,21],[11,12,20,21],[0,10,11,21]],sTetromino=[[10,11,21,22],[2,11,12,21],[10,11,21,22],[2,11,12,21]],tTetromino=[[1,10,11,12],[1,11,12,21],[10,11,12,21],[1,10,11,21]],oTetromino=[[0,1,10,11],[0,1,10,11],[0,1,10,11],[0,1,10,11]],iTetromino=[[10,11,12,13],[1,11,21,31],[10,11,12,13],[1,12,21,31]],theTetrominoes=[lTetromino,uTetromino,zTetromino,sTetromino,tTetromino,oTetromino,iTetromino];let currentPosition=4,currentRotation=0,random=Math.floor(Math.random()*theTetrominoes.length);console.log(random);let current=theTetrominoes[random][0];function draw(){current.forEach(t=>{squares[currentPosition+t].classList.add("tetromino")})}function undraw(){current.forEach(t=>{squares[currentPosition+t].classList.remove("tetromino")})}let timerId=setInterval(moveDown,1e3);function control(t){37===t.keyCode?moveLeft():38===t.keyCode?rotate():39===t.keyCode?moveRight():40===t.keyCode&&moveDown()}function moveDown(){undraw(),currentPosition+=10,draw(),freeze()}function freeze(){current.some(t=>squares[currentPosition+t+10].classList.contains("taken"))&&(current.forEach(t=>squares[currentPosition+t].classList.add("taken")),random=Math.floor(Math.random()*theTetrominoes.length),current=theTetrominoes[random][currentRotation],currentPosition=4,draw())}function moveLeft(){undraw();current.some(t=>(currentPosition+t)%10==0)||(currentPosition-=1),current.some(t=>squares[currentPosition+t].classList.contains("taken"))&&(currentPosition+=1),draw()}function moveRight(){undraw();current.some(t=>(currentPosition+t)%10==9)||(currentPosition+=1),current.some(t=>squares[currentPosition+t].classList.contains("taken"))&&(currentPosition-=1),draw()}function rotate(){undraw(),currentRotation++,currentRotation===current.length&&(currentRotation=0),current=theTetrominoes[random][currentRotation]}document.addEventListener("keyup",control);